#[[++

Copyright (C) 2021 Jan Orend

All rights reserved.

This file has been generated by the Automatic Component Toolkit (ACT) version 1.6.0.

Abstract: This is an autogenerated CMakeLists file for the development of GladiusLib.

Interface version: 1.0.0


]]

cmake_minimum_required(VERSION 3.21)

# Set policies to avoid warnings
if(POLICY CMP0177)
    cmake_policy(SET CMP0177 NEW)  # install() DESTINATION paths normalization
endif()

### The implementation of the GladiusLib component
project(GladiusLib)


# The location of autogenerated interfaces
set(GLADIUS_LIB_INTERFACES ${CMAKE_CURRENT_SOURCE_DIR}/Interfaces)
set(CMAKE_CURRENT_AUTOGENERATED_DIR ${GLADIUS_LIB_INTERFACES})

file(GLOB GLADIUSLIB_SRC
	${CMAKE_CURRENT_SOURCE_DIR}/Stub/*.cpp
)
file(GLOB GLADIUSLIB_HDR
	${CMAKE_CURRENT_SOURCE_DIR}/Stub/*.hpp
)
set(GLADIUSLIB_SRC ${GLADIUSLIB_SRC} ${GLADIUSLIB_SRC}
	${CMAKE_CURRENT_AUTOGENERATED_DIR}/gladius_interfaceexception.cpp
	${CMAKE_CURRENT_AUTOGENERATED_DIR}/gladius_interfacewrapper.cpp
)

add_library(gladiuslib SHARED ${GLADIUSLIB_SRC})
if (MSVC)
	set_property(TARGET gladiuslib PROPERTY
		MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>DLL")
endif()
# Do not prefix the binary's name with "lib" on Unix systems:
set_target_properties(gladiuslib PROPERTIES PREFIX "" IMPORT_PREFIX "" )
# The following two properties are crucial to reduce the number of undesirably exported symbols
set_target_properties(gladiuslib PROPERTIES CXX_VISIBILITY_PRESET hidden)
set_target_properties(gladiuslib PROPERTIES VISIBILITY_INLINES_HIDDEN ON)
# This makes sure symbols are exported
target_compile_options(gladiuslib PRIVATE "-D__GLADIUSLIB_EXPORTS")
target_include_directories(gladiuslib PRIVATE ${CMAKE_CURRENT_AUTOGENERATED_DIR})
target_include_directories(gladiuslib PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/Stub)


target_include_directories(gladiuslib PUBLIC ${AdditionalIncludes} ${STB_INCLUDE_DIRS})
target_link_libraries(gladiuslib PUBLIC gladius_lib)

install(TARGETS gladiuslib DESTINATION ${INSTALL_PREFIX}/)